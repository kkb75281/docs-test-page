<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>new-version-test-html</title>
    </head>
    <link rel="stylesheet" href="style.css" />
    <style>
        .group-menu {
            border-bottom: 1px solid #ccc;
            padding: 16px 0;
        }
        .group-menu h2 {
            margin: 0;
            margin-bottom: 8px;
        }
        .btn {
            display: inline-block;
            margin: 5px;
            padding: 10px 15px;
            /* border: 1px solid #007bff; */
            /* background-color: #007bff; */
            /* color: white; */

            border: 1px solid #787878;
            background-color: #efefef;
            color: #000;
            text-decoration: none;
            border-radius: 5px;
            font-size: 14px;
        }
        .btn:hover {
            /* background-color: #0056b3; */
            /* border-color: #0056b3; */
            background-color: #e0e0e0;
        }
        .btn.disabled {
            /* background-color: #cccccc; */
            /* border-color: #cccccc; */
            opacity: 0.3;
            pointer-events: none;
            cursor: default;
        }
    </style>
    <body>
        <h1 id="serviceName"></h1>
        <p id="loggedUser"></p>
        <div class="group-menu">
            <h2>Authentication</h2>
            <a class="btn signup" id="signupBtn" href="signup.html">Sign Up</a>
            <a class="btn login" id="loginBtn" href="login.html">Login</a>
            <button
                class="btn logout"
                id="logoutBtn"
                onclick="skapi.logout()"
                style="display: none"
            >
                로그아웃
            </button>
            <a class="btn forgot-password" href="forgot-password.html"
                >Forgot Password</a
            >
            <a class="btn disabled openid-login" href="/">OpenID Login</a>
        </div>
        <div class="group-menu">
            <h2>User Account</h2>
            <a class="btn" href="/gpt/user-account.html">userAccount GPT</a>
            <a class="btn email-verification" href="email-verification"
                >Email Verification</a
            >
            <a class="btn profile" href="user-profile">Updating User Profile</a>
            <a class="btn change-password" href="change-password.html"
                >Change Password</a
            >
            <a
                class="btn disable-recover-account"
                href="disable-recover-account.html"
                >Disable / Recover Account</a
            >
            <a class="btn search-users" href="search-users">Search Users</a>
        </div>
        <div class="group-menu">
            <h2>Database</h2>
            <a class="btn" href="/gpt/database.html">Database GPT</a>
            <a class="btn" href="database.html">Creating a Record</a>
        </div>
        <div class="group-menu">
            <h2>Realtime Connection</h2>
            <a class="btn" href="/gpt/realtime.html">Realtime GPT</a>
        </div>
        <a class="btn invite" href="invite.html">초대하기</a>
        <a class="btn subscribe" href="subscribe-newsletter.html"
            >서비스메일 구독</a
        >
        <a class="btn database" href="database.html">데이터베이스 관리</a>
        <a class="btn inquiry" href="inquiry.html">문의하기</a>
    </body>
    <script src="https://cdn.jsdelivr.net/npm/skapi-js@latest/dist/skapi.js"></script>
    <script src="service.js"></script>
    <script>
        // 로그인 상태에 따라 버튼 표시/숨김
        function updateAuthButtons() {
            const isLoggedIn = Object.keys(loggedUser).length > 0;
            const signupBtn = document.getElementById("signupBtn");
            const loginBtn = document.getElementById("loginBtn");
            const logoutBtn = document.getElementById("logoutBtn");

            if (isLoggedIn) {
                // 로그인 상태: Sign Up, Login 숨기고 Logout 보이기
                signupBtn.style.display = "none";
                loginBtn.style.display = "none";
                logoutBtn.style.display = "inline-block";
            } else {
                // 비로그인 상태: Sign Up, Login 보이고 Logout 숨기기
                signupBtn.style.display = "inline-block";
                loginBtn.style.display = "inline-block";
                logoutBtn.style.display = "none";
            }
        }

        // 초기 로드 시 체크
        setTimeout(updateAuthButtons, 100);

        // 로그인/로그아웃 이벤트 감지를 위해 주기적으로 체크
        setInterval(updateAuthButtons, 500);
    </script>
</html>
