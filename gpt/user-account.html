<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Skapi User Account Test</title>
        <link rel="stylesheet" href="style.css" />
        <style>
            body {
                font-family: Arial, sans-serif;
                max-width: 1400px;
                margin: 0 auto;
                padding: 20px;
            }
            .container {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 20px;
                margin-top: 20px;
            }
            .panel {
                border: 1px solid #ccc;
                border-radius: 8px;
                padding: 20px;
                background-color: #f9f9f9;
            }
            .panel h2 {
                margin-top: 0;
                border-bottom: 2px solid #007bff;
                padding-bottom: 10px;
            }
            .panel h3 {
                margin-top: 15px;
                color: #007bff;
                font-size: 16px;
            }
            #resultLog {
                height: 500px;
                overflow-y: auto;
                background-color: #fff;
                border: 1px solid #ddd;
                border-radius: 4px;
                padding: 10px;
                font-family: monospace;
                font-size: 12px;
            }
            .result-item {
                margin-bottom: 10px;
                padding: 8px;
                border-radius: 4px;
                border-left: 3px solid #ccc;
            }
            .result-item.success {
                background-color: #d4edda;
                border-left-color: #28a745;
            }
            .result-item.error {
                background-color: #f8d7da;
                border-left-color: #dc3545;
            }
            .result-item.info {
                background-color: #d1ecf1;
                border-left-color: #17a2b8;
            }
            button {
                padding: 8px 16px;
                margin: 5px 5px 5px 0;
                border: none;
                border-radius: 4px;
                background-color: #007bff;
                color: white;
                font-size: 14px;
                cursor: pointer;
            }
            button:hover {
                background-color: #0056b3;
            }
            button.success {
                background-color: #28a745;
            }
            button.success:hover {
                background-color: #218838;
            }
            button.danger {
                background-color: #dc3545;
            }
            button.danger:hover {
                background-color: #c82333;
            }
            input[type="text"],
            input[type="email"],
            input[type="password"],
            textarea {
                width: 100%;
                padding: 8px;
                border: 1px solid #ccc;
                border-radius: 4px;
                font-size: 14px;
                box-sizing: border-box;
            }
            .form-group {
                margin-bottom: 15px;
            }
            .form-group label {
                display: block;
                margin-bottom: 5px;
                font-weight: bold;
                font-size: 13px;
            }
            .user-info {
                background-color: #e9ecef;
                padding: 10px;
                border-radius: 4px;
                margin-bottom: 15px;
                font-size: 14px;
            }
            .tabs {
                display: flex;
                border-bottom: 2px solid #ddd;
                margin-bottom: 15px;
            }
            .tab {
                padding: 10px 20px;
                cursor: pointer;
                border: none;
                background: none;
                font-size: 14px;
                font-weight: bold;
                color: #666;
                margin: 0;
                border-radius: 0;
            }
            .tab.active {
                color: #007bff;
                border-bottom: 2px solid #007bff;
            }
            .tab-content {
                display: none;
            }
            .tab-content.active {
                display: block;
            }
        </style>
    </head>
    <body>
        <a class="btn home" href="/index.html">í™ˆìœ¼ë¡œ</a>
        <h1>ğŸ‘¤ Skapi User Account Test</h1>

        <div class="user-info">
            <strong>Logged User:</strong>
            <span id="loggedUser">Not logged in</span>
        </div>

        <!-- Test Guide Panel -->
        <div
            class="panel"
            style="background-color: #fff3cd; border-color: #ffc107"
        >
            <h2>ğŸ“‹ í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ</h2>

            <details open>
                <summary
                    style="
                        cursor: pointer;
                        font-weight: bold;
                        margin-bottom: 10px;
                    "
                >
                    ğŸ“§ E-Mail Verification í…ŒìŠ¤íŠ¸
                </summary>
                <ol style="line-height: 1.8">
                    <li>
                        <strong>ì¸ì¦ ì½”ë“œ ì „ì†¡</strong>
                        <ul>
                            <li>
                                ë¡œê·¸ì¸ëœ ìƒíƒœì—ì„œ "Email Verification" íƒ­ ì´ë™
                            </li>
                            <li>"Send Verification Code" ë²„íŠ¼ í´ë¦­</li>
                            <li>âœ… ì´ë©”ì¼ ìˆ˜ì‹ í•¨ì—ì„œ ì¸ì¦ ì½”ë“œ í™•ì¸</li>
                            <li>â±ï¸ ì½”ë“œëŠ” ì¼ì • ì‹œê°„ í›„ ë§Œë£Œë¨</li>
                        </ul>
                    </li>
                    <li>
                        <strong>ì´ë©”ì¼ ì¸ì¦ ì™„ë£Œ</strong>
                        <ul>
                            <li>
                                Verification Code ì…ë ¥ë€ì— ì´ë©”ì¼ì—ì„œ ë°›ì€ ì½”ë“œ
                                ì…ë ¥
                            </li>
                            <li>"Verify Email" ë²„íŠ¼ í´ë¦­</li>
                            <li>âœ… ì¸ì¦ ì„±ê³µ ë©”ì‹œì§€ í™•ì¸</li>
                            <li>
                                "Get My Profile" â†’
                                <code>email_verified</code> í™•ì¸
                            </li>
                        </ul>
                    </li>
                </ol>

                <div
                    style="
                        background-color: #fff3cd;
                        border: 1px solid #ffc107;
                        border-radius: 4px;
                        padding: 10px;
                        margin-top: 10px;
                    "
                >
                    <strong>ğŸ’¡ ì¸ì¦ëœ ì´ë©”ì¼ì˜ í˜œíƒ:</strong>
                    <ul style="margin: 5px 0">
                        <li>ë¹„ë°€ë²ˆí˜¸ ë¶„ì‹¤ ì‹œ ì¬ì„¤ì • ê°€ëŠ¥</li>
                        <li>ì„œë¹„ìŠ¤ ë‰´ìŠ¤ë ˆí„° ìˆ˜ì‹  ê°€ëŠ¥</li>
                        <li>ë¹„í™œì„±í™”ëœ ê³„ì • ë³µêµ¬ ê°€ëŠ¥</li>
                        <li>ë‹¤ë¥¸ ì‚¬ìš©ìì—ê²Œ ì´ë©”ì¼ ê³µê°œ ì„ íƒ ê°€ëŠ¥</li>
                    </ul>
                </div>

                <div
                    style="
                        background-color: #f8d7da;
                        border: 1px solid #dc3545;
                        border-radius: 4px;
                        padding: 10px;
                        margin-top: 10px;
                    "
                >
                    <strong>âš ï¸ ì£¼ì˜ì‚¬í•­:</strong>
                    <ul style="margin: 5px 0">
                        <li>ì´ë©”ì¼ ì£¼ì†Œ ë³€ê²½ ì‹œ ì¸ì¦ ìƒíƒœê°€ ì´ˆê¸°í™”ë¨</li>
                        <li>
                            Signup confirmationì´ í™œì„±í™”ëœ ê²½ìš° ê°€ì… ì‹œ ìë™
                            ì¸ì¦ë¨
                        </li>
                    </ul>
                </div>
            </details>

            <details style="margin-top: 15px">
                <summary
                    style="
                        cursor: pointer;
                        font-weight: bold;
                        margin-bottom: 10px;
                    "
                >
                    ğŸ” Change Password í…ŒìŠ¤íŠ¸
                </summary>
                <ol style="line-height: 1.8">
                    <li>
                        <strong>ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</strong>
                        <ul>
                            <li>"Change Password" íƒ­ ì´ë™</li>
                            <li>Current Password ì…ë ¥</li>
                            <li>New Password ì…ë ¥ (ìµœì†Œ 6ì)</li>
                            <li>"Change Password" í´ë¦­</li>
                            <li>âœ… ë³€ê²½ ì„±ê³µ ë©”ì‹œì§€ í™•ì¸</li>
                        </ul>
                    </li>
                    <li>
                        <strong>ë³€ê²½ëœ ë¹„ë°€ë²ˆí˜¸ë¡œ ì¬ë¡œê·¸ì¸</strong>
                        <ul>
                            <li>ë¡œê·¸ì•„ì›ƒ í›„ ìƒˆ ë¹„ë°€ë²ˆí˜¸ë¡œ ë¡œê·¸ì¸</li>
                            <li>âœ… ë¡œê·¸ì¸ ì„±ê³µ í™•ì¸</li>
                        </ul>
                    </li>
                </ol>
            </details>

            <details style="margin-top: 15px">
                <summary
                    style="
                        cursor: pointer;
                        font-weight: bold;
                        margin-bottom: 10px;
                    "
                >
                    ğŸ‘¤ Update Profile í…ŒìŠ¤íŠ¸
                </summary>
                <ol style="line-height: 1.8">
                    <li>
                        <strong>í”„ë¡œí•„ ì •ë³´ ì—…ë°ì´íŠ¸</strong>
                        <ul>
                            <li>"Update Profile" íƒ­ ì´ë™</li>
                            <li>Name, Email, Gender ë“± ì •ë³´ ì…ë ¥</li>
                            <li>Profile Picture ì„ íƒ (ì„ íƒì‚¬í•­)</li>
                            <li>"Update Profile" í´ë¦­</li>
                            <li>âœ… ì—…ë°ì´íŠ¸ ì„±ê³µ ë©”ì‹œì§€ í™•ì¸</li>
                        </ul>
                    </li>
                    <li>
                        <strong>í”„ë¡œí•„ í™•ì¸</strong>
                        <ul>
                            <li>"Get My Profile" ë²„íŠ¼ í´ë¦­</li>
                            <li>âœ… ë³€ê²½ëœ ì •ë³´ í™•ì¸</li>
                        </ul>
                    </li>
                </ol>
            </details>

            <details style="margin-top: 15px">
                <summary
                    style="
                        cursor: pointer;
                        font-weight: bold;
                        margin-bottom: 10px;
                    "
                >
                    ï¿½ Search Users í…ŒìŠ¤íŠ¸
                </summary>
                <ol style="line-height: 1.8">
                    <li>
                        <strong>ëª¨ë“  ì‚¬ìš©ì ê²€ìƒ‰</strong>
                        <ul>
                            <li>"Search Users" íƒ­ ì´ë™</li>
                            <li>Search For: "All Users (no filter)" ì„ íƒ</li>
                            <li>"Search Users" í´ë¦­</li>
                            <li>âœ… ëª¨ë“  ì‚¬ìš©ì ëª©ë¡ í™•ì¸ (ìµœì‹  ê°€ì…ìˆœ)</li>
                        </ul>
                    </li>
                    <li>
                        <strong>ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰ (Starts with)</strong>
                        <ul>
                            <li>Search For: "Name"</li>
                            <li>Condition: ">= (Starts with)"</li>
                            <li>Value: ê²€ìƒ‰í•  ì´ë¦„ ì…ë ¥ (ì˜ˆ: "Baksa")</li>
                            <li>âœ… í•´ë‹¹ ì´ë¦„ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ì‚¬ìš©ì í™•ì¸</li>
                        </ul>
                    </li>
                    <li>
                        <strong>ê°€ì…ì¼ ê¸°ì¤€ ê²€ìƒ‰</strong>
                        <ul>
                            <li>Search For: "Timestamp"</li>
                            <li>Condition: "&lt; (Lesser than)"</li>
                            <li>Value: 1672498800000 (2023-01-01)</li>
                            <li>âœ… 2023ë…„ ì´ì „ ê°€ì…ì í™•ì¸</li>
                        </ul>
                    </li>
                    <li>
                        <strong>ìƒë…„ì›”ì¼ ë²”ìœ„ ê²€ìƒ‰</strong>
                        <ul>
                            <li>Search For: "Birthdate"</li>
                            <li>Value: 1985-01-01</li>
                            <li>Range: 1990-12-31</li>
                            <li>âœ… 1985~1990ë…„ìƒ ì‚¬ìš©ì í™•ì¸</li>
                        </ul>
                    </li>
                    <li>
                        <strong>âš ï¸ ì£¼ì˜ì‚¬í•­</strong>
                        <ul>
                            <li>Publicìœ¼ë¡œ ì„¤ì •ë˜ì§€ ì•Šì€ ì†ì„±ì€ ê²€ìƒ‰ ë¶ˆê°€</li>
                            <li>
                                user_id, email, phone_numberëŠ” "=" ì¡°ê±´ë§Œ ê°€ëŠ¥
                            </li>
                            <li>Rangeì™€ Conditionì€ í•¨ê»˜ ì‚¬ìš© ë¶ˆê°€</li>
                        </ul>
                    </li>
                </ol>
            </details>

            <details style="margin-top: 15px">
                <summary
                    style="
                        cursor: pointer;
                        font-weight: bold;
                        margin-bottom: 10px;
                    "
                >
                    ï¿½ğŸ—‘ï¸ Disable/Recover Account í…ŒìŠ¤íŠ¸
                </summary>
                <ol style="line-height: 1.8">
                    <li>
                        <strong>ê³„ì • ë¹„í™œì„±í™”</strong>
                        <ul>
                            <li>
                                âš ï¸ <strong>ì£¼ì˜:</strong> í…ŒìŠ¤íŠ¸ ê³„ì •ìœ¼ë¡œë§Œ ì§„í–‰
                            </li>
                            <li>"Disable/Recover" íƒ­ ì´ë™</li>
                            <li>"Disable My Account" í´ë¦­</li>
                            <li>âœ… ê³„ì • ë¹„í™œì„±í™”ë¨ (ìë™ ë¡œê·¸ì•„ì›ƒ)</li>
                        </ul>
                    </li>
                    <li>
                        <strong>ê³„ì • ë³µêµ¬</strong>
                        <ul>
                            <li>
                                ë¡œê·¸ì¸ í˜ì´ì§€ì—ì„œ ë¹„í™œì„±í™”ëœ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸
                                ì‹œë„
                            </li>
                            <li>"ì´ë©”ì¼ ì¸ì¦ëœ ê³„ì •"ì¸ ê²½ìš° ë³µêµ¬ ê°€ëŠ¥</li>
                            <li>ë³µêµ¬ ì½”ë“œ ì´ë©”ì¼ ìˆ˜ì‹ </li>
                            <li>ì½”ë“œ ì…ë ¥í•˜ì—¬ ê³„ì • ë³µêµ¬</li>
                        </ul>
                    </li>
                </ol>
            </details>
        </div>

        <div class="container">
            <!-- Left Panel: Account Operations -->
            <div class="panel">
                <h2>âš™ï¸ Account Operations</h2>

                <div class="tabs">
                    <button class="tab active" onclick="switchTab('email')">
                        Email Verification
                    </button>
                    <button class="tab" onclick="switchTab('password')">
                        Change Password
                    </button>
                    <button class="tab" onclick="switchTab('profile')">
                        Update Profile
                    </button>
                    <button class="tab" onclick="switchTab('search')">
                        Search Users
                    </button>
                    <button class="tab" onclick="switchTab('disable')">
                        Disable/Recover
                    </button>
                </div>

                <!-- EMAIL VERIFICATION TAB -->
                <div id="tab-email" class="tab-content active">
                    <h3>ğŸ“§ Email Verification</h3>

                    <div
                        style="
                            background-color: #d1ecf1;
                            padding: 10px;
                            border-radius: 4px;
                            margin-bottom: 15px;
                            font-size: 13px;
                        "
                    >
                        ğŸ’¡ <strong>Tip:</strong> ì¸ì¦ ì½”ë“œë¥¼ ë¨¼ì € ì´ë©”ì¼ë¡œ ë°›ì€
                        í›„, ì½”ë“œë¥¼ ì…ë ¥í•˜ì—¬ ì¸ì¦ì„ ì™„ë£Œí•˜ì„¸ìš”.
                    </div>

                    <div class="form-group">
                        <button
                            onclick="sendVerificationCode()"
                            class="success"
                        >
                            ğŸ“¤ Send Verification Code
                        </button>
                    </div>

                    <hr />

                    <div class="form-group">
                        <label>Verification Code:</label>
                        <input
                            type="text"
                            id="verificationCode"
                            placeholder="ì´ë©”ì¼ì—ì„œ ë°›ì€ ì¸ì¦ ì½”ë“œ ì…ë ¥"
                        />
                    </div>

                    <button onclick="verifyEmailWithCode()">
                        âœ… Verify Email
                    </button>
                </div>

                <!-- CHANGE PASSWORD TAB -->
                <div id="tab-password" class="tab-content">
                    <h3>ğŸ” Change Password</h3>

                    <div
                        style="
                            background-color: #fff3cd;
                            padding: 10px;
                            border-radius: 4px;
                            margin-bottom: 15px;
                            font-size: 13px;
                        "
                    >
                        ğŸ’¡ <strong>ë¹„ë°€ë²ˆí˜¸ ìš”êµ¬ì‚¬í•­:</strong> 6~60ì ì‚¬ì´ì—¬ì•¼
                        í•©ë‹ˆë‹¤.
                    </div>

                    <form id="passwordForm" onsubmit="changePassword(event)">
                        <div class="form-group">
                            <label>Current Password:</label>
                            <input
                                type="password"
                                name="current_password"
                                placeholder="í˜„ì¬ ë¹„ë°€ë²ˆí˜¸"
                                required
                            />
                        </div>

                        <div class="form-group">
                            <label>New Password:</label>
                            <input
                                type="password"
                                name="new_password"
                                placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸ (6~60ì)"
                                minlength="6"
                                maxlength="60"
                                required
                            />
                        </div>

                        <button type="submit">Change Password</button>
                    </form>
                </div>

                <!-- UPDATE PROFILE TAB -->
                <div id="tab-profile" class="tab-content">
                    <h3>ğŸ‘¤ Update Profile</h3>

                    <div
                        style="
                            background-color: #fff3cd;
                            padding: 10px;
                            border-radius: 4px;
                            margin-bottom: 15px;
                            font-size: 13px;
                        "
                    >
                        âš ï¸ <strong>ì¤‘ìš”:</strong> Profile ì†ì„±ì€ ë¬¸ìì—´(string)
                        ê°’ë§Œ í—ˆìš©í•©ë‹ˆë‹¤.<br />
                        ì´ë¯¸ì§€ íŒŒì¼ ì—…ë¡œë“œê°€ í•„ìš”í•œ ê²½ìš°, Databaseì˜ Files
                        íƒ­ì—ì„œ ë¨¼ì € íŒŒì¼ì„ ì—…ë¡œë“œí•œ í›„ URLì„ ì‚¬ìš©í•˜ì„¸ìš”.
                    </div>

                    <form id="profileForm" onsubmit="updateProfile(event)">
                        <div class="form-group">
                            <label>Name:</label>
                            <input
                                type="text"
                                name="name"
                                placeholder="Your name"
                            />
                        </div>

                        <div class="form-group">
                            <label>Email:</label>
                            <input
                                type="email"
                                name="email"
                                placeholder="your@email.com"
                            />
                        </div>

                        <div class="form-group">
                            <label>Phone Number:</label>
                            <input
                                type="text"
                                name="phone_number"
                                placeholder="+821012345678"
                            />
                        </div>

                        <div class="form-group">
                            <label>Gender:</label>
                            <select name="gender">
                                <option value="">Select gender</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Birthdate:</label>
                            <input
                                type="text"
                                name="birthdate"
                                placeholder="YYYY-MM-DD"
                            />
                        </div>

                        <div class="form-group">
                            <label>Address:</label>
                            <textarea
                                name="address"
                                rows="3"
                                placeholder="Your address"
                            ></textarea>
                        </div>

                        <div class="form-group">
                            <label>Profile Picture URL:</label>
                            <input
                                type="text"
                                name="picture"
                                placeholder="https://example.com/profile.jpg"
                            />
                            <div
                                style="
                                    background-color: #d1ecf1;
                                    padding: 8px;
                                    border-radius: 4px;
                                    margin-top: 5px;
                                    font-size: 12px;
                                "
                            >
                                ğŸ’¡ <strong>ì´ë¯¸ì§€ ì—…ë¡œë“œ ë°©ë²•:</strong><br />
                                1. Database í˜ì´ì§€ì˜ Files íƒ­ìœ¼ë¡œ ì´ë™<br />
                                2. Public ì´ë¯¸ì§€ íŒŒì¼ ì—…ë¡œë“œ (postRecord
                                ì‚¬ìš©)<br />
                                3. ì—…ë¡œë“œëœ íŒŒì¼ì˜ URLì„ ë³µì‚¬í•˜ì—¬ ì—¬ê¸°ì— ì…ë ¥
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Profile Page URL:</label>
                            <input
                                type="text"
                                name="profile"
                                placeholder="https://yourprofile.com"
                            />
                        </div>

                        <div class="form-group">
                            <label>Website URL:</label>
                            <input
                                type="text"
                                name="website"
                                placeholder="https://yourwebsite.com"
                            />
                        </div>

                        <div class="form-group">
                            <label>Nickname:</label>
                            <input
                                type="text"
                                name="nickname"
                                placeholder="Your nickname"
                            />
                        </div>

                        <div class="form-group">
                            <label>Misc (ë³¸ì¸ë§Œ ë³´ëŠ” ë©”ëª¨):</label>
                            <textarea
                                name="misc"
                                rows="3"
                                placeholder="ê°œì¸ ë©”ëª¨ (ë‹¤ë¥¸ ì‚¬ìš©ìì—ê²Œ ë³´ì´ì§€ ì•ŠìŒ)"
                            ></textarea>
                        </div>

                        <button type="submit" class="success">
                            Update Profile
                        </button>
                    </form>
                </div>

                <!-- SEARCH USERS TAB -->
                <div id="tab-search" class="tab-content">
                    <h3>ğŸ” Search Users</h3>

                    <div
                        style="
                            background-color: #d1ecf1;
                            padding: 10px;
                            border-radius: 4px;
                            margin-bottom: 15px;
                            font-size: 13px;
                        "
                    >
                        ğŸ’¡ <strong>Info:</strong> Publicìœ¼ë¡œ ì„¤ì •ëœ ì†ì„±ë§Œ
                        ê²€ìƒ‰ë©ë‹ˆë‹¤.
                    </div>

                    <div class="form-group">
                        <label>Search For:</label>
                        <select id="searchFor">
                            <option value="">All Users (no filter)</option>
                            <option value="user_id">User ID</option>
                            <option value="email">Email</option>
                            <option value="phone_number">Phone Number</option>
                            <option value="name">Name</option>
                            <option value="address">Address</option>
                            <option value="gender">Gender</option>
                            <option value="birthdate">
                                Birthdate (YYYY-MM-DD)
                            </option>
                            <option value="locale">
                                Locale (Country Code)
                            </option>
                            <option value="subscribers">
                                Subscribers (Number)
                            </option>
                            <option value="timestamp">
                                Timestamp (Unix Time)
                            </option>
                            <option value="approved">
                                Approved (Account Status)
                            </option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Condition:</label>
                        <select id="searchCondition">
                            <option value="=">= (Equal, default)</option>
                            <option value=">=">
                                >= (Greater or Equal / Starts with for string)
                            </option>
                            <option value=">">(Greater than)</option>
                            <option value="<=">&lt;= (Lesser or Equal)</option>
                            <option value="<">&lt; (Lesser than)</option>
                        </select>
                        <small
                            style="color: #666; display: block; margin-top: 5px"
                        >
                            âš ï¸ user_id, email, phone_numberëŠ” "=" ì¡°ê±´ë§Œ ê°€ëŠ¥
                        </small>
                    </div>

                    <div class="form-group">
                        <label>Value:</label>
                        <input
                            type="text"
                            id="searchValue"
                            placeholder="ê²€ìƒ‰í•  ê°’ ì…ë ¥ (ì˜ˆ: Baksa, 1672498800000, 1985-01-01)"
                        />
                        <small
                            style="color: #666; display: block; margin-top: 5px"
                        >
                            ğŸ’¡ approved ê²€ìƒ‰ì‹œ: by=admin/skapi/master,
                            approved=true/false í˜•ì‹ìœ¼ë¡œ ì…ë ¥
                        </small>
                    </div>

                    <div class="form-group">
                        <label>Range (ì„ íƒì‚¬í•­):</label>
                        <input
                            type="text"
                            id="searchRange"
                            placeholder="ë²”ìœ„ ë ê°’ (ì˜ˆ: 1990-12-31)"
                        />
                        <small
                            style="color: #666; display: block; margin-top: 5px"
                        >
                            âš ï¸ RangeëŠ” Conditionê³¼ í•¨ê»˜ ì‚¬ìš© ë¶ˆê°€
                        </small>
                    </div>

                    <div class="inline-group">
                        <div class="form-group">
                            <label>Limit:</label>
                            <input
                                type="number"
                                id="searchLimit"
                                value="50"
                                min="1"
                                max="1000"
                            />
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="searchFetchMore" />
                                Fetch More
                            </label>
                        </div>
                    </div>

                    <button onclick="searchUsers()">ğŸ” Search Users</button>

                    <hr />

                    <h4>ğŸ“‹ Example Queries</h4>
                    <div style="font-size: 12px; color: #666">
                        <p>
                            <strong>Name starts with 'Baksa':</strong><br />
                            Search For: name, Condition: >=, Value: Baksa
                        </p>

                        <p>
                            <strong>Users joined before 2023 Jan 1:</strong
                            ><br />
                            Search For: timestamp, Condition: &lt;, Value:
                            1672498800000
                        </p>

                        <p>
                            <strong>Birthday between 1985~1990:</strong><br />
                            Search For: birthdate, Value: 1985-01-01, Range:
                            1990-12-31
                        </p>
                    </div>
                </div>

                <!-- DISABLE/RECOVER TAB -->
                <div id="tab-disable" class="tab-content">
                    <h3>ğŸ—‘ï¸ Disable Account</h3>

                    <div
                        style="
                            background-color: #f8d7da;
                            padding: 10px;
                            border-radius: 4px;
                            margin-bottom: 15px;
                            font-size: 13px;
                        "
                    >
                        âš ï¸ <strong>ê²½ê³ :</strong><br />
                        â€¢ ê³„ì •ì„ ë¹„í™œì„±í™”í•˜ë©´ ìë™ìœ¼ë¡œ ë¡œê·¸ì•„ì›ƒë©ë‹ˆë‹¤.<br />
                        â€¢ ëª¨ë“  ë°ì´í„°ëŠ”
                        <strong>90ì¼ í›„ ì‚­ì œ</strong>ë©ë‹ˆë‹¤.<br />
                        â€¢ ë³µêµ¬ë¥¼ ì›í•˜ì‹œë©´
                        <strong>ì´ë©”ì¼ ì¸ì¦ì´ í•„ìˆ˜</strong>ì…ë‹ˆë‹¤.
                    </div>

                    <button onclick="disableAccount()" class="danger">
                        ğŸ—‘ï¸ Disable My Account
                    </button>

                    <hr />

                    <h3>â™»ï¸ Recover Disabled Account</h3>

                    <div
                        style="
                            background-color: #d1ecf1;
                            padding: 10px;
                            border-radius: 4px;
                            margin-bottom: 15px;
                            font-size: 13px;
                        "
                    >
                        ğŸ’¡ <strong>ë³µêµ¬ ë°©ë²•:</strong><br />
                        1. ë¹„í™œì„±í™”ëœ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ ì‹œë„<br />
                        2. "USER_IS_DISABLED" ì—ëŸ¬ ë°œìƒ<br />
                        3. ë³µêµ¬ í™•ì¸ ë©”ì‹œì§€ì—ì„œ "í™•ì¸" í´ë¦­<br />
                        4. ì´ë©”ì¼ë¡œ ë³µêµ¬ ë§í¬ ìˆ˜ì‹ <br />
                        5. ë§í¬ í´ë¦­í•˜ì—¬ ê³„ì • ë³µêµ¬<br />
                        <br />
                        âš ï¸ <strong>í•„ìˆ˜ ì¡°ê±´:</strong> ì´ë©”ì¼ ì¸ì¦ + ë¹„ë°€ë²ˆí˜¸
                        ê¸°ì–µ
                    </div>

                    <p style="font-size: 13px; color: #666">
                        ë¹„í™œì„±í™”ëœ ê³„ì •ì€ ë¡œê·¸ì¸ í˜ì´ì§€ì—ì„œ ë³µêµ¬í•  ìˆ˜
                        ìˆìŠµë‹ˆë‹¤.<br />
                        í…ŒìŠ¤íŠ¸: ê³„ì • ë¹„í™œì„±í™” â†’ ë¡œê·¸ì•„ì›ƒ â†’ ë¡œê·¸ì¸ í˜ì´ì§€ì—ì„œ
                        í•´ë‹¹ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ ì‹œë„
                    </p>
                </div>
            </div>

            <!-- Right Panel: Profile Info -->
            <div class="panel">
                <h2>ğŸ“Š User Information</h2>

                <button onclick="getMyProfile()">Get My Profile</button>

                <div id="profileInfo" style="margin-top: 15px; display: none">
                    <h3>Current Profile:</h3>
                    <div
                        id="profileContent"
                        style="
                            background-color: #fff;
                            padding: 10px;
                            border-radius: 4px;
                            border: 1px solid #ddd;
                        "
                    ></div>
                </div>
            </div>
        </div>

        <!-- Result Log Panel (Full Width) -->
        <div class="panel" style="margin-top: 20px">
            <h2>ğŸ“‹ Result Log</h2>
            <button onclick="clearLog()">Clear Log</button>
            <div id="resultLog"></div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/skapi-js@latest/dist/skapi.js"></script>
        <script src="../service.js"></script>
        <script>
            // Tab switching
            function switchTab(tab) {
                document
                    .querySelectorAll(".tab-content")
                    .forEach((tc) => tc.classList.remove("active"));
                document
                    .querySelectorAll(".tab")
                    .forEach((t) => t.classList.remove("active"));
                document.getElementById("tab-" + tab).classList.add("active");
                event.target.classList.add("active");
            }

            // Log functions
            function addLog(type, title, data) {
                const log = document.getElementById("resultLog");
                const item = document.createElement("div");
                item.className = `result-item ${type}`;

                const time = new Date().toLocaleTimeString("ko-KR");
                item.innerHTML = `
                <div style="font-weight: bold; margin-bottom: 5px;">${title}</div>
                <pre style="margin: 0; white-space: pre-wrap; word-wrap: break-word;">${JSON.stringify(
                    data,
                    null,
                    2
                )}</pre>
                <div style="font-size: 10px; color: #666; margin-top: 5px;">${time}</div>
            `;

                log.insertBefore(item, log.firstChild);
            }

            function clearLog() {
                document.getElementById("resultLog").innerHTML = "";
            }

            // ==================== EMAIL VERIFICATION ====================
            async function sendVerificationCode() {
                try {
                    const result = await skapi.verifyEmail();
                    addLog("success", "ğŸ“¤ Verification Code Sent", result);
                    alert(
                        "ì¸ì¦ ì½”ë“œê°€ ì´ë©”ì¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ë©”ì¼ì„ í™•ì¸í•˜ì„¸ìš”."
                    );
                } catch (error) {
                    addLog("error", "âŒ Send Failed", error.message);
                }
            }

            async function verifyEmailWithCode() {
                try {
                    const code = document
                        .getElementById("verificationCode")
                        .value.trim();
                    if (!code) {
                        alert("ì¸ì¦ ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
                        return;
                    }

                    const result = await skapi.verifyEmail({ code });
                    addLog("success", "âœ… Email Verified", result);
                    alert("ì´ë©”ì¼ ì¸ì¦ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!");
                    document.getElementById("verificationCode").value = "";
                } catch (error) {
                    addLog("error", "âŒ Verification Failed", error.message);
                }
            }

            // ==================== CHANGE PASSWORD ====================
            async function changePassword(event) {
                event.preventDefault();

                try {
                    // Formì„ ì§ì ‘ ì „ë‹¬ (ë¬¸ì„œì—ì„œ ê¶Œì¥í•˜ëŠ” ë°©ì‹)
                    const result = await skapi.changePassword(event);

                    addLog("success", "ğŸ” Password Changed", result);
                    alert(result); // "SUCCESS: Password has been changed."

                    // í¼ ì´ˆê¸°í™”
                    event.target.reset();
                } catch (error) {
                    addLog("error", "âŒ Change Password Failed", error.message);
                    alert("ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì‹¤íŒ¨: " + error.message);
                }
            }

            // ==================== UPDATE PROFILE ====================
            async function updateProfile(event) {
                event.preventDefault();

                try {
                    const form = event.target;
                    const result = await skapi.updateProfile(event);

                    addLog("success", "âœ… Profile Updated", result);
                    alert("í”„ë¡œí•„ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.");
                    form.reset();
                } catch (error) {
                    addLog("error", "âŒ Update Failed", error.message);
                }
            }

            // ==================== GET PROFILE ====================
            async function getMyProfile() {
                try {
                    const result = await skapi.getProfile();

                    addLog("info", "ğŸ“Š My Profile", result);

                    // Display profile info
                    const profileInfo = document.getElementById("profileInfo");
                    const profileContent =
                        document.getElementById("profileContent");

                    profileContent.innerHTML = `
                        <p><strong>User ID:</strong> ${result.user_id}</p>
                        <p><strong>Email:</strong> ${result.email} ${
                        result.email_public ? "ğŸŒ" : "ğŸ”’"
                    }</p>
                        <p><strong>Email Verified:</strong> ${
                            result.email_verified ? "âœ… Yes" : "âŒ No"
                        }</p>
                        <p><strong>Name:</strong> ${result.name || "N/A"}</p>
                        <p><strong>Nickname:</strong> ${
                            result.nickname || "N/A"
                        }</p>
                        <p><strong>Phone:</strong> ${
                            result.phone_number || "N/A"
                        } ${result.phone_number_public ? "ğŸŒ" : "ğŸ”’"}</p>
                        <p><strong>Gender:</strong> ${result.gender || "N/A"} ${
                        result.gender_public ? "ğŸŒ" : "ğŸ”’"
                    }</p>
                        <p><strong>Birthdate:</strong> ${
                            result.birthdate || "N/A"
                        } ${result.birthdate_public ? "ğŸŒ" : "ğŸ”’"}</p>
                        <p><strong>Address:</strong> ${
                            result.address || "N/A"
                        } ${result.address_public ? "ğŸŒ" : "ğŸ”’"}</p>
                        <p><strong>Picture:</strong> ${
                            result.picture
                                ? `<a href="${result.picture}" target="_blank">View</a>`
                                : "N/A"
                        }</p>
                        <p><strong>Profile URL:</strong> ${
                            result.profile
                                ? `<a href="${result.profile}" target="_blank">${result.profile}</a>`
                                : "N/A"
                        }</p>
                        <p><strong>Website:</strong> ${
                            result.website
                                ? `<a href="${result.website}" target="_blank">${result.website}</a>`
                                : "N/A"
                        }</p>
                        <p><strong>Misc:</strong> ${result.misc || "N/A"}</p>
                        <p><strong>Account Created:</strong> ${new Date(
                            result.timestamp
                        ).toLocaleString("ko-KR")}</p>
                        <p style="font-size: 11px; color: #666; margin-top: 10px;">ğŸŒ = Public, ğŸ”’ = Private</p>
                    `;

                    profileInfo.style.display = "block";
                } catch (error) {
                    addLog("error", "âŒ Get Profile Failed", error.message);
                }
            }

            // ==================== SEARCH USERS ====================
            async function searchUsers() {
                try {
                    const searchFor =
                        document.getElementById("searchFor").value;
                    const condition =
                        document.getElementById("searchCondition").value;
                    const value = document
                        .getElementById("searchValue")
                        .value.trim();
                    const range = document
                        .getElementById("searchRange")
                        .value.trim();

                    const params = {};

                    // Build params based on inputs
                    if (searchFor) {
                        params.searchFor = searchFor;

                        if (value) {
                            // Handle 'approved' special case - expects object {by: 'admin'|'skapi'|'master', approved?: boolean}
                            if (searchFor === "approved") {
                                try {
                                    // Parse input like "by=admin, approved=true" or "by=skapi"
                                    const approvedObj = {};
                                    const pairs = value
                                        .split(",")
                                        .map((p) => p.trim());
                                    pairs.forEach((pair) => {
                                        const [key, val] = pair
                                            .split("=")
                                            .map((s) => s.trim());
                                        if (key === "by") {
                                            approvedObj.by = val;
                                        } else if (key === "approved") {
                                            approvedObj.approved =
                                                val === "true";
                                        }
                                    });
                                    params.value = approvedObj;
                                } catch (e) {
                                    alert(
                                        "approved ê²€ìƒ‰ì‹œ value í˜•ì‹: by=admin, approved=true"
                                    );
                                    return;
                                }
                            }
                            // Try to parse as number for timestamp/subscribers
                            else if (
                                searchFor === "timestamp" ||
                                searchFor === "subscribers"
                            ) {
                                params.value = Number(value);
                            } else {
                                params.value = value;
                            }
                        }

                        // Add condition only if not default "="
                        if (condition && condition !== "=") {
                            params.condition = condition;
                        }

                        // Add range if provided
                        if (range) {
                            if (
                                searchFor === "timestamp" ||
                                searchFor === "subscribers"
                            ) {
                                params.range = Number(range);
                            } else {
                                params.range = range;
                            }
                        }
                    }

                    const fetchOptions = {
                        limit: Number(
                            document.getElementById("searchLimit").value || 50
                        ),
                        fetchMore:
                            document.getElementById("searchFetchMore").checked,
                    };

                    addLog("info", "ğŸ” Searching Users", {
                        params,
                        fetchOptions,
                    });

                    const result = await skapi.getUsers(
                        Object.keys(params).length > 0 ? params : undefined,
                        fetchOptions
                    );

                    addLog("success", "âœ… Users Found", {
                        count: result.list.length,
                        endOfList: result.endOfList,
                        users: result.list.map((u) => ({
                            user_id: u.user_id,
                            email: u.email,
                            name: u.name,
                            phone_number: u.phone_number,
                            gender: u.gender,
                            birthdate: u.birthdate,
                            address: u.address,
                            locale: u.locale,
                            subscribers: u.subscribers,
                            timestamp: new Date(u.timestamp).toLocaleString(
                                "ko-KR"
                            ),
                        })),
                    });
                } catch (error) {
                    addLog("error", "âŒ Search Failed", error.message);
                }
            }

            // ==================== DISABLE ACCOUNT ====================
            async function disableAccount() {
                try {
                    const confirmed = confirm(
                        "ì •ë§ë¡œ ê³„ì •ì„ ë¹„í™œì„±í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nâš ï¸ ì£¼ì˜ì‚¬í•­:\nâ€¢ ìë™ìœ¼ë¡œ ë¡œê·¸ì•„ì›ƒë©ë‹ˆë‹¤.\nâ€¢ ëª¨ë“  ë°ì´í„°ëŠ” 90ì¼ í›„ ì‚­ì œë©ë‹ˆë‹¤.\nâ€¢ ë³µêµ¬í•˜ë ¤ë©´ ì´ë©”ì¼ ì¸ì¦ì´ í•„ìˆ˜ì…ë‹ˆë‹¤."
                    );
                    if (!confirmed) return;

                    const result = await skapi.disableAccount();

                    addLog("success", "ğŸ—‘ï¸ Account Disabled", result);
                    alert(
                        "ê³„ì •ì´ ë¹„í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.\nìë™ìœ¼ë¡œ ë¡œê·¸ì•„ì›ƒë©ë‹ˆë‹¤.\n\në³µêµ¬ëŠ” ë¡œê·¸ì¸ í˜ì´ì§€ì—ì„œ ê°€ëŠ¥í•©ë‹ˆë‹¤."
                    );

                    // ê³„ì •ì´ ë¹„í™œì„±í™”ë˜ë©´ ìë™ìœ¼ë¡œ ë¡œê·¸ì•„ì›ƒë¨
                } catch (error) {
                    addLog("error", "âŒ Disable Failed", error.message);
                    alert("ê³„ì • ë¹„í™œì„±í™” ì‹¤íŒ¨: " + error.message);
                }
            }

            // Check login status on page load
            window.addEventListener("load", async () => {
                try {
                    const user = await skapi.getProfile();
                    document.getElementById("loggedUser").textContent =
                        user.email;
                } catch (error) {
                    document.getElementById("loggedUser").textContent =
                        "Not logged in";
                }
            });
        </script>
    </body>
</html>
